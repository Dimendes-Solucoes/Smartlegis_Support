import{d as T,u as U,r as A,q as B,c as n,o as l,a as i,b as t,h as E,w as y,e,f as j,F as c,i as x,x as b,A as q,t as f,n as z,g as V,z as $}from"./app-fd9APL3o.js";import{_ as P}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-BCtCMGtt.js";import{P as N}from"./PrimaryButton-ZUGOc5Z2.js";import{_,a as g}from"./InputError.vue_vue_type_script_setup_true_lang-iRk06wta.js";import{_ as G}from"./TextInput.vue_vue_type_script_setup_true_lang-DmtmWbjN.js";import{_ as L}from"./IconButton-CaV5Z5UQ.js";import{_ as R}from"./BackButtonRow.vue_vue_type_script_setup_true_lang-jrgxoqx0.js";import{r as Y}from"./TrashIcon-hhDCm9q7.js";/* empty css            */import"./ClipboardDocumentListIcon-BSLqYE-r.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BaseButtonLink-B2sJy0-j.js";const H={class:"mb-4"},I={class:"mb-4"},J={class:"mt-2 flex space-x-4"},K=["id","value"],Q=["for"],W={class:"flex items-center justify-end"},X={class:"p-4 border rounded-lg"},Z={class:"mb-4 flex flex-col sm:flex-row items-end sm:space-x-4 space-y-4 sm:space-y-0"},O={class:"flex-1 w-full"},ss=["value"],es={class:"flex-1 w-full"},os=["value"],is={class:"flex justify-end"},ts={key:0,class:"mt-4"},rs={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 table-sm border"},as={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ds={class:"px-3 py-2 whitespace-normal text-sm font-medium text-gray-900 dark:text-gray-100"},ns={class:"px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},ls={class:"px-3 py-2 whitespace-nowrap text-right text-sm font-medium"},ms={key:1,class:"text-gray-500 dark:text-gray-400 mt-4"},ws=T({__name:"EditCommission",props:{comission:{},commissionTypes:{},counciliors:{},comissionUsers:{},functions:{}},setup(S){const d=S,m=U({comission_name:d.comission.comission_name,type:d.comission.type}),F=()=>{m.put(route("commissions.update",d.comission.id))},r=U({users:d.comissionUsers.map(u=>({id:u.id,function:Number(u.function)}))}),a=A({id:null,function:null}),v=A([]);B([()=>d.counciliors,()=>r.users],()=>{v.value=d.counciliors.filter(u=>!r.users.some(s=>s.id===u.id))},{immediate:!0});const D=()=>{a.value.id&&a.value.function?r.users.some(s=>s.id===a.value.id)?alert("Este usuário já foi adicionado à comissão."):(r.users.push({id:a.value.id,function:a.value.function}),a.value.id=null,a.value.function=null,k()):alert("Selecione um usuário e uma função para adicionar.")},M=u=>{r.users=r.users.filter(s=>s.id!==u),k()},k=()=>{r.put(route("commissions.update_users",d.comission.id))};return(u,s)=>(l(),n(c,null,[i(t(E),{title:"Editar Comissão"}),i(P,null,{default:y(()=>[i(R,{href:u.route("commissions.index")},null,8,["href"]),e("form",{onSubmit:j(F,["prevent"]),class:"mb-8 p-4 border rounded-lg"},[s[5]||(s[5]=e("h3",{class:"text-md font-semibold mb-4"},"Detalhes da Comissão",-1)),e("div",H,[i(_,{for:"comission_name",value:"Nome da Comissão"}),i(G,{id:"comission_name",type:"text",class:"mt-1 block w-full",modelValue:t(m).comission_name,"onUpdate:modelValue":s[0]||(s[0]=o=>t(m).comission_name=o),required:"",autofocus:"",autocomplete:"off"},null,8,["modelValue"]),i(g,{class:"mt-2",message:t(m).errors.comission_name},null,8,["message"])]),e("div",I,[i(_,{value:"Tipo de Comissão"}),e("div",J,[(l(!0),n(c,null,x(d.commissionTypes,o=>(l(),n("div",{key:o.id,class:"flex items-center"},[b(e("input",{id:`type-${o.id}`,type:"radio",value:o.id,"onUpdate:modelValue":s[1]||(s[1]=h=>t(m).type=h),class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-indigo-600 shadow-sm focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:focus:ring-offset-gray-800",required:""},null,8,K),[[q,t(m).type]]),e("label",{for:`type-${o.id}`,class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},f(o.title),9,Q)]))),128))]),i(g,{class:"mt-2",message:t(m).errors.type},null,8,["message"])]),e("div",W,[i(N,{class:z({"opacity-25":t(m).processing}),disabled:t(m).processing},{default:y(()=>s[4]||(s[4]=[V(" Atualizar Detalhes ")])),_:1,__:[4]},8,["class","disabled"])])],32),e("div",X,[s[10]||(s[10]=e("h3",{class:"text-md font-semibold mb-4"},"Gerenciar Membros da Comissão",-1)),e("div",Z,[e("div",O,[i(_,{for:"select-user",value:"Selecionar Vereador"}),b(e("select",{id:"select-user","onUpdate:modelValue":s[2]||(s[2]=o=>a.value.id=o),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[s[6]||(s[6]=e("option",{value:null,disabled:""},"Selecione um vereador",-1)),(l(!0),n(c,null,x(v.value,o=>(l(),n("option",{key:o.id,value:o.id},f(o.name),9,ss))),128))],512),[[$,a.value.id]]),i(g,{class:"mt-2",message:t(r).errors["users.id"]},null,8,["message"])]),e("div",es,[i(_,{for:"select-function",value:"Selecionar Função"}),b(e("select",{id:"select-function","onUpdate:modelValue":s[3]||(s[3]=o=>a.value.function=o),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},[s[7]||(s[7]=e("option",{value:null,disabled:""},"Selecione uma função",-1)),(l(!0),n(c,null,x(d.functions,o=>(l(),n("option",{key:o.id,value:o.id},f(o.title),9,os))),128))],512),[[$,a.value.function]]),i(g,{class:"mt-2",message:t(r).errors["users.function"]},null,8,["message"])])]),e("div",is,[i(N,{type:"button",onClick:D,class:"sm:w-auto mb-2 sm:mt-0",disabled:!a.value.id||!a.value.function||t(r).processing},{default:y(()=>s[8]||(s[8]=[V(" Adicionar Membro ")])),_:1,__:[8]},8,["disabled"])]),t(r).users.length>0?(l(),n("div",ts,[e("table",rs,[s[9]||(s[9]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Nome "),e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Função "),e("th",{scope:"col",class:"px-3 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Ações ")])],-1)),e("tbody",as,[(l(!0),n(c,null,x(t(r).users,(o,h)=>{var w,C;return l(),n("tr",{key:o.id},[e("td",ds,f((w=d.counciliors.find(p=>p.id===o.id))==null?void 0:w.name),1),e("td",ns,f((C=d.functions.find(p=>p.id===o.function))==null?void 0:C.title),1),e("td",ls,[i(L,{onClick:p=>M(o.id),color:"red",title:"Deletar",disabled:t(r).processing},{default:y(()=>[i(t(Y),{class:"h-5 w-5"})]),_:2},1032,["onClick","disabled"])])])}),128))])])])):(l(),n("p",ms,"Nenhum membro adicionado ainda.")),i(g,{class:"mt-2",message:t(r).errors.users},null,8,["message"])])]),_:1})],64))}});export{ws as default};
